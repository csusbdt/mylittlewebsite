<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, interactive-widget=resizes-content">
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
</head>
<link href="../main.css" rel="stylesheet">
</head>
<body>

<canvas id="canvas"></canvas>

<script type="module">
import "../main.js";
import { start_loop } from "../binaural.js";
	
function scale(octaveTones, baseFrequency, halfNotesAwayFromBase) {
	const f = baseFrequency * Math.pow(Math.pow(2, 1.0 / octaveTones), halfNotesAwayFromBase); 
    return f;
}

const sounds = [];
let t = 0  ;
const f = 311;
const q = .28;
const v = .5;

sounds.push([scale(12, f, 0), v, 3 * q]); 
sounds.push([scale(12, f, 0), v, 1 * q]); 
sounds.push([scale(12, f, 2), v, 2 * q]); 
sounds.push([scale(12, f, 0), v, 2 * q]); 
sounds.push([scale(12, f, 5), v, 2 * q]); 
sounds.push([scale(12, f, 4), v, 4 * q]); 

sounds.push([scale(12, f, 0), v, 3 * q]);
sounds.push([scale(12, f, 0), v, 1 * q]);
sounds.push([scale(12, f, 2), v, 2 * q]);
sounds.push([scale(12, f, 0), v, 2 * q]);
sounds.push([scale(12, f, 7), v, 2 * q]);
sounds.push([scale(12, f, 5), v, 4 * q]);

sounds.push([scale(12, f,  0), v, 3 * q]);
sounds.push([scale(12, f,  0), v, 1 * q]);
sounds.push([scale(12, f, 12), v, 2 * q]);
sounds.push([scale(12, f,  9), v, 2 * q]);
sounds.push([scale(12, f,  5), v, 2 * q]);
sounds.push([scale(12, f,  4), v, 2 * q]);
sounds.push([scale(12, f,  2), v, 2 * q]);

sounds.push([scale(12, f, 10), v, 3 * q]);
sounds.push([scale(12, f, 10), v, 1 * q]);
sounds.push([scale(12, f,  9), v, 2 * q]);
sounds.push([scale(12, f,  5), v, 2 * q]);
sounds.push([scale(12, f,  7), v, 2 * q]);
sounds.push([scale(12, f,  5), v, 4 * q]);

set_design_size(1000, 1000);
bg_blue();

canvas.addEventListener('click', e => {
	start_loop(sounds, 3, .01, .05, 1.5);
});

</script>

</body>
</html>
